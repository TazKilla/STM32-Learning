/**
 ******************************************************************************
 * @file           : main.c
 * @author         : Auto-generated by STM32CubeIDE
 * @brief          : Main program body
 ******************************************************************************
 * @attention
 *
 * Copyright (c) 2024 STMicroelectronics.
 * All rights reserved.
 *
 * This software is licensed under terms that can be found in the LICENSE file
 * in the root directory of this software component.
 * If no LICENSE file comes with this software, it is provided AS-IS.
 *
 ******************************************************************************
 */

#include <stdint.h>

#include "../../STM32F30xx/gpio_ports.c"

int main(void)
{
	//uint32_t *pClkCtrlReg = (uint32_t*)0x40021014;
	//uint32_t *pPortBModeReg = (uint32_t*)0x48000400;
	//uint32_t *pPortBOutDataReg = (uint32_t*)0x48000414;

	// 1 - Enable the clock for PGIOB peripheral in the AHBENR
	//uint32_t tmp = *pClkCtrlReg;	// Read operation
	//tmp = tmp | 0x00040000;			// Modify
	//tmp |= 1 << 18;
	//*pClkCtrlReg = tmp;				// Write back

	// Above can be reduced to: *pClkCtrlReg |= 0x00040000;

	// 2 - Configure the mode of the IO pin as output
	// 2.a - Clear the 26th and 27th bit positions (CLEAR)
	//*pPortBModeReg &= 0xF3FFFFFF;
	//*pPortBModeReg &= ~(3 << 26);
	// 2.b - Make the 26th bit position as 1 (SET)
	//*pPortBModeReg |= 0x04000000;
	//*pPortBModeReg |= 1 << 26;

	// 3 - Set 13th pit of the output data register to make I/O pin-13 as HIGH
	//*pPortBOutDataReg |= 0x2000;
	//*pPortBOutDataReg |= 1 << 13;

	*GPIOPortB.pRCCReg |= 1 << 18;
	*GPIOPortB.pPortModeReg &= ~(3 << 26);
	*GPIOPortB.pPortModeReg |= 1 << 26;
	*GPIOPortB.pPortOutDataReg |= 1 << 13;
    /* Loop forever */
	for(;;);
}
