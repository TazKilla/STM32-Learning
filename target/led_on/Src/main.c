/**
 ******************************************************************************
 * @file           : main.c
 * @author         : Auto-generated by STM32CubeIDE
 * @brief          : Main program body
 ******************************************************************************
 * @attention
 *
 * Copyright (c) 2024 STMicroelectronics.
 * All rights reserved.
 *
 * This software is licensed under terms that can be found in the LICENSE file
 * in the root directory of this software component.
 * If no LICENSE file comes with this software, it is provided AS-IS.
 *
 ******************************************************************************
 */

#include <stdint.h>

int main(void)
{
	uint32_t *pClkCtrlReg = (uint32_t*)0x40021014;
	uint32_t *pPortBModeReg = (uint32_t*)0x48000400;
	uint32_t *pPortBOutDataReg = (uint32_t*)0x48000414;

	// 1 - Enable the clock for PGIOB peripheral in the AHBENR
	uint32_t tmp = *pClkCtrlReg;	// Read operation
	tmp = tmp | 0x00040000;			// Modify
	*pClkCtrlReg = tmp;				// Write back

	// Above can be reduced to: *pClkCtrlReg |= 0x08;

	// 2 - Configure the mode of the IO pin as output
	// 2.a - Clear the 10th and 11th bit positions (CLEAR)
	*pPortBModeReg &= 0xF3FFFFFF;
	// 2.b - Make the 10th bit position as 1 (SET)
	*pPortBModeReg |= 0x04000000;

	// 3 - Set 5th pit of the output data register to make I/O pin-5 as HIGH
	*pPortBOutDataReg |= 0x2000;

    /* Loop forever */
	for(;;);
}
